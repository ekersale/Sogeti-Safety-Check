<!--
  Generated template for the EventsDetails page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header style="background:rgb(239, 69, 39);">
  <button ion-button clear (click)="dismiss()">
    <ion-icon name="arrow-back" style="color:white; font-size: 1.8em;"></ion-icon>
  </button>
</ion-header>


<ion-content padding>
  <ion-card >
  <ion-item>
    <ion-avatar item-left>
      <ion-img src="{{event.author.profileImg.relativePath}}"></ion-img>
    </ion-avatar>
    <h2>{{event.name}}</h2>
    <p>{{event.start_at |Â date : 'dd/MM/yyyy'}}</p>
  </ion-item>
    <ion-card-content >
      <p>{{event.message}}</p>
    </ion-card-content>
  <ion-slides [options]="mySlideOptions">
    <ion-slide *ngFor="let item of event.images" style="margin:auto;">
      <ion-img [src]="item.relativePath" ></ion-img>
    </ion-slide>
  </ion-slides>


  <ion-row >
    <ion-col style="margin-left: 10px;">
      <p>{{event.participants.length}} present</p>
    </ion-col>
    <ion-col style="text-align:right; margin-right: 10px;">
      <p>{{comments.length}} comments</p>
    </ion-col>
  </ion-row>
  <ion-row style="border-top: 1px solid #cecece;">
    <ion-col style="width: 33%;"><button ion-button full clear small color="sogeti">
      <ion-icon name="thumbs-up" style="margin-right: 5px;"></ion-icon>
      I come
    </button></ion-col>
    <ion-col style="width: 33%;"><button ion-button full clear small color="sogeti">
      <ion-icon name="text" style="margin-right: 5px;"></ion-icon>
      Comments</button></ion-col>
    <ion-col style="width: 33%;"><button ion-button full clear small color="sogeti" >
      <ion-icon name="ios-information-circle" style="margin-right: 5px; "></ion-icon>
      Contact
    </button></ion-col>
  </ion-row>
</ion-card>
  <ion-list>
    <ion-item *ngIf="error != ''">{{error}}</ion-item>
    <ion-item *ngFor="let comment of comments" text-wrap class="itemComment" >
      <ion-avatar item-left>
        <ion-img item-top [src]="comment.author.profileImg.relativePath"></ion-img>
      </ion-avatar>
      <h2 style="font-size: 13px;">{{comment.author.name.first}} {{comment.author.name.last}}</h2>
      <p>{{comment.message}}</p>
      <h6>{{comment.created_at | amTimeAgo:true }} ago</h6>
      <ion-icon item-right name="close" *ngIf="comment.author._id == currentUser"></ion-icon>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer>
  <form [formGroup]="commentForm" (ngSubmit)="onSubmit()">
  <ion-toolbar no-border-top>
    <ion-textarea fz-elastic rows="1" [formControl]="commentForm.controls['message']" ></ion-textarea>
    <ion-buttons end>
      <button ion-button clear color="sogeti" type="submit" [disabled]="!commentForm.valid">
        Publish
      </button>
    </ion-buttons>
  </ion-toolbar>
  </form>
</ion-footer>
